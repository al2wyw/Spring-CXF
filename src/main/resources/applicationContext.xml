<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:jaxrs="http://cxf.apache.org/jaxrs"
	xmlns:context="http://www.springframework.org/schema/context"
	xmlns:util="http://www.springframework.org/schema/util"
	xsi:schemaLocation="
       http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
       http://cxf.apache.org/jaxrs http://cxf.apache.org/schemas/jaxrs.xsd
       http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
       http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.0.xsd"
>
<!-- default-autowire="byType" this will work even if you donot use @autowire on class -->

	<!-- CXF WebService-->
	<!-- Detects annotations like @Component, @Service, @Controller, @Repository, @Configuration -->
	<context:component-scan base-package="com.techiekernel"/>
	
	<bean id="fooBarWsClass" class="com.techiekernel.rest.FooBarWS"/>
	<jaxrs:server id="fooBarWs" address="/foobar">
		<jaxrs:serviceBeans>
			<ref bean="fooBarWsClass" />
		</jaxrs:serviceBeans>
		<jaxrs:providers>
            <ref bean="jacksonProvider" />
    	</jaxrs:providers>
	</jaxrs:server>
	
	<bean id="jacksonProvider" class="com.fasterxml.jackson.jaxrs.json.JacksonJsonProvider">
	</bean>
	
	
	<!-- spring app beans -->
		
	<!-- used for ${test} of this configuration file for test=123 entry in property file 
	<context:property-placeholder location="classpath:placeholder.properties"/> 
	-->

	<bean id="placeholderconfig"
		class="xpadro.tutorial.rest.config.MyPropertyPlaceholderConfigurer">
		<property name="locations">
			<list>
				<value>classpath:placeholder.properties</value>
			</list>
		</property>
	</bean>
	
	<!-- when the following two in use, all the property of the other beans will be wrong as there are two java.util.properties: 
	propertiesReader and systemProperties(caused by autowire bytype!!! separate the affected beans to the other config files)	
	-->	
	<bean id="propertiesReader"
  		class="org.springframework.beans.factory.config.PropertiesFactoryBean">
	  <property name="locations">
	   <list>
	    <value>classpath:*.properties</value>
	   </list>
	  </property>
	</bean> 
	<!-- <util:properties id="propertiesReader" location="classpath:placeholder.properties" />  -->
	
	<bean id="placeholderConfigBean" class="xpadro.tutorial.rest.model.PlaceholderConfigBean">
		<property name="test" value="${testfucktest}"/>
	</bean>
	<!-- 	this does not work but the following hashmap works!
	<bean id="props" class="java.util.Properties">  
	    <constructor-arg index="0">  
	       <props>  
	          <prop key="abc">123</prop>  
	       </props>  
	    </constructor-arg>  
	</bean> 
	-->
	<bean id="props" class="java.util.HashMap">  
	    <constructor-arg index="0">  
	       <map>  
	          <entry key="abc" value="234"/>  
	       </map>  
	    </constructor-arg>  
	</bean> 
	

</beans>